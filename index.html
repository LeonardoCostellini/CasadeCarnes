<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Estilos -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link rel="stylesheet" href="./style/output.css" />

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
  <script>
    const SUPABASE_URL = 'https://hfhaymnwwptopuomnxeu.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhmaGF5bW53d3B0b3B1b21ueGV1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA4NzAxNTksImV4cCI6MjA3NjQ0NjE1OX0.seyuP8nVhlEM38FwwxIaNu8_CbQY-4LGMvzIr78JhuU';
    const db = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  </script>

  <title>Casa de Carnes N.Sra Aparecida</title>
</head>
<body>

  <!-- Header -->
  <header class="w-full h-[420px] bg-zinc-900 bg-cover bg-center" style="background-image: url('./assets/unnamed.jpg')">
    <div class="w-full h-full flex flex-col justify-center items-center">
      <img src="./assets/logo.jpg" alt="Logo Marca" class="w-32 h-32 rounded-full shadow-lg hover:scale-110 transition-transform duration-200" />
      <h1 class="text-3xl mt-4 mb-2 font-bold text-white">Casa de Carnes N.Sra Aparecida</h1>
      <span class="text-white font-medium">Av. Jose Bonifacio, 470 - Centro, Ibipora - PR</span>
      <div class="bg-green-600 px-4 py-1 rounded-lg mt-5">
        <span class="text-white font-medium">Terça a Domingo - 08:00 às 19:30</span>
      </div>
    </div>
  </header>

  <!-- Título -->
  <h2 class="text-2xl md:text-3xl font-bold text-center mt-9 mb-6">Conheça nossos produtos</h2>

  <!-- Lista de produtos -->
  <div id="menu">
    <main id="lista-produtos" class="grid grid-cols-1 md:grid-cols-2 gap-7 md:gap-10 mx-auto max-w-7xl px-2 mb-16">
      <!-- Produtos vão aparecer aqui -->
    </main>
  </div>

<style>
  /* Ajusta a imagem do produto */
  .produto-imagem {
    width: 300px;         /* largura fixa */
    height: 200px;        /* altura fixa */
    object-fit: cover;    /* mantém proporção, corta o excesso */
    border-bottom: 1px solid #ddd; /* opcional, para dar separação */
  }
   
.menu-item {
  display: flex;
  gap: 1rem;
  background-color: #fff;
  border-radius: 0.5rem;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  transition: transform 0.3s, box-shadow 0.3s;
}

.menu-item:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 4px 12px rgba(0,0,0,0.25);
}

.menu-item img {
  width: 120px;
  height: 120px;
  object-fit: cover;
  flex-shrink: 0;
  border-radius: 0.5rem;
  transition: transform 0.3s;
}

.menu-item img:hover {
  transform: scale(1.1) rotate(-2deg);
}


</style>

<script>
  async function carregarProdutos() {
    try {
      const { data, error } = await db
        .from('produtos')
        .select('*')
        .eq('estoque', true)
        .order('id', { ascending: true });

      if (error) throw error;

      const container = document.getElementById('lista-produtos');
      container.innerHTML = '';

data.forEach(produto => {
  const card = document.createElement('div');
  card.className = 'menu-item bg-white rounded-lg shadow-md overflow-hidden';

  card.innerHTML = `
    <img src="${produto.imagem || './assets/default.png'}" alt="${produto.nome}" />
    <div class="p-4 flex flex-col justify-center">
      <h3 class="text-lg font-bold text-gray-800">${produto.nome}</h3>
      <p class="text-sm text-gray-600 mt-1">${produto.descricao}</p>
      <p class="text-green-600 font-semibold mt-2">R$ ${Number(produto.preco).toFixed(2)}</p>
    </div>
  `;

  container.appendChild(card);
});

    } catch (err) {
      console.error('Erro ao carregar produtos:', err);
    }
  }

  document.addEventListener('DOMContentLoaded', carregarProdutos);
</script>

</body>
</html>
